apply plugin: 'java' 
apply plugin: 'war' 
apply plugin: 'jetty' 
apply plugin: 'eclipse-wtp'
apply plugin: 'watch'
apply plugin: 'application'

mainClassName = "HelloWorldServlet"

repositories {
  mavenCentral()
}

buildscript {
    repositories { maven { url 'http://bluepapa32.github.io/maven/' } }
    dependencies { classpath 'com.bluepapa32.gradle.plugins:gradle-watch-plugin:0.1.0' }
}

dependencies {
  providedCompile 'javax.servlet:servlet-api:2.5'
  compile 'com.github.spullara.mustache.java:compiler:0.8.14'
  compile 'org.eclipse.jetty:jetty-project:9.1.3.v20140225'
  runtime 'javax.servlet:jstl:1.1.2'
  testCompile group: 'junit', name: 'junit', version: '4.11'
}

jettyRunWar {
    httpPort = 9000
    reload = "automatic"
    scanIntervalSeconds = 1
}

jettyRun {
    reload = "automatic"
    httpPort = 9000
    scanIntervalSeconds = 1
}

watch {
    java {
        files files('src/main/java')
        tasks 'compileJava'
    }
}

task stage(dependsOn: ['clean', 'installApp'])